<html lang="en">

<style>
.axis path {
    fill: none;
    stroke: #777;
    shape-rendering: crispEdges;
}
.axis text {
    font-family: Lato;
    font-size: 13px;
}
#visualisation {
  background: #F0F0F0;
  /*padding: 2% 1%;*/

}
</style>

<head>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>

<body>

    <div class="container">

        <div class="jumbotron">
          <svg id="visualisation" width="1500" height="800"></svg>
        </div>

    </div>

</body>

<script>
var data = [
 {
   "Year": 1880,
   "Glob": -0.16,
   "NHem": -0.27,
   "SHem": -0.04,
   "24N-90N": -0.35,
   "24S-24N": -0.13,
   "90S-24S": -0.01,
   "64N-90N": -0.81,
   "44N-64N": -0.46,
   "24N-44N": -0.26,
   "EQU-24N": -0.15,
   "24S-EQU": -0.1,
   "44S-24S": -0.03,
   "64S-44S": 0.05,
   "90S-64S": 0.65
 },
 {
   "Year": 1890,
   "Glob": -0.35,
   "NHem": -0.38,
   "SHem": -0.32,
   "24N-90N": -0.45,
   "24S-24N": -0.37,
   "90S-24S": -0.22,
   "64N-90N": -1.14,
   "44N-64N": -0.54,
   "24N-44N": -0.27,
   "EQU-24N": -0.27,
   "24S-EQU": -0.47,
   "44S-24S": -0.17,
   "64S-44S": -0.27,
   "90S-64S": 0.13
 },
 {
   "Year": 1900,
   "Glob": -0.08,
   "NHem": -0.09,
   "SHem": -0.06,
   "24N-90N": -0.19,
   "24S-24N": 0.17,
   "90S-24S": -0.3,
   "64N-90N": -0.56,
   "44N-64N": -0.12,
   "24N-44N": -0.15,
   "EQU-24N": 0.08,
   "24S-EQU": 0.26,
   "44S-24S": -0.28,
   "64S-44S": -0.29,
   "90S-64S": 0.25
 },
 {
   "Year": 1910,
   "Glob": -0.43,
   "NHem": -0.44,
   "SHem": -0.42,
   "24N-90N": -0.41,
   "24S-24N": -0.48,
   "90S-24S": -0.38,
   "64N-90N": -0.57,
   "44N-64N": -0.24,
   "24N-44N": -0.49,
   "EQU-24N": -0.48,
   "24S-EQU": -0.49,
   "44S-24S": -0.33,
   "64S-44S": -0.45,
   "90S-64S": 0.18
 },
 {
   "Year": 1920,
   "Glob": -0.27,
   "NHem": -0.3,
   "SHem": -0.24,
   "24N-90N": -0.25,
   "24S-24N": -0.26,
   "90S-24S": -0.32,
   "64N-90N": -0.02,
   "44N-64N": -0.2,
   "24N-44N": -0.34,
   "EQU-24N": -0.38,
   "24S-EQU": -0.13,
   "44S-24S": -0.19,
   "64S-44S": -0.48,
   "90S-64S": -1.13
 },
 {
   "Year": 1930,
   "Glob": -0.16,
   "NHem": -0.02,
   "SHem": -0.29,
   "24N-90N": 0.04,
   "24S-24N": -0.12,
   "90S-24S": -0.42,
   "64N-90N": 0.54,
   "44N-64N": 0.04,
   "24N-44N": -0.1,
   "EQU-24N": -0.1,
   "24S-EQU": -0.13,
   "44S-24S": -0.33,
   "64S-44S": -0.47,
   "90S-64S": -2.58
 },
 {
   "Year": 1940,
   "Glob": 0.12,
   "NHem": 0.17,
   "SHem": 0.09,
   "24N-90N": 0.11,
   "24S-24N": 0.28,
   "90S-24S": -0.07,
   "64N-90N": 1,
   "44N-64N": -0.03,
   "24N-44N": -0.09,
   "EQU-24N": 0.27,
   "24S-EQU": 0.28,
   "44S-24S": 0.03,
   "64S-44S": -0.2,
   "90S-64S": -0.04
 },
 {
   "Year": 1950,
   "Glob": -0.18,
   "NHem": -0.15,
   "SHem": -0.21,
   "24N-90N": -0.05,
   "24S-24N": -0.29,
   "90S-24S": -0.14,
   "64N-90N": 0.19,
   "44N-64N": -0.31,
   "24N-44N": 0.04,
   "EQU-24N": -0.31,
   "24S-EQU": -0.28,
   "44S-24S": -0.06,
   "64S-44S": -0.16,
   "90S-64S": -0.85
 },
 {
   "Year": 1960,
   "Glob": -0.03,
   "NHem": 0.08,
   "SHem": -0.13,
   "24N-90N": 0.09,
   "24S-24N": 0.02,
   "90S-24S": -0.2,
   "64N-90N": 0.34,
   "44N-64N": -0.07,
   "24N-44N": 0.11,
   "EQU-24N": 0.06,
   "24S-EQU": -0.03,
   "44S-24S": -0.1,
   "64S-44S": -0.07,
   "90S-64S": -0.76
 },
 {
   "Year": 1970,
   "Glob": 0.03,
   "NHem": -0.04,
   "SHem": 0.09,
   "24N-90N": -0.11,
   "24S-24N": 0.07,
   "90S-24S": 0.11,
   "64N-90N": -0.21,
   "44N-64N": -0.13,
   "24N-44N": -0.06,
   "EQU-24N": 0.07,
   "24S-EQU": 0.07,
   "44S-24S": 0.11,
   "64S-44S": 0.03,
   "90S-64S": 0.31
 },
 {
   "Year": 1980,
   "Glob": 0.26,
   "NHem": 0.17,
   "SHem": 0.35,
   "24N-90N": 0.06,
   "24S-24N": 0.31,
   "90S-24S": 0.39,
   "64N-90N": 0.25,
   "44N-64N": 0.02,
   "24N-44N": 0.02,
   "EQU-24N": 0.33,
   "24S-EQU": 0.29,
   "44S-24S": 0.35,
   "64S-44S": 0.37,
   "90S-64S": 0.58
 },
 {
   "Year": 1990,
   "Glob": 0.45,
   "NHem": 0.53,
   "SHem": 0.37,
   "24N-90N": 0.63,
   "24S-24N": 0.37,
   "90S-24S": 0.37,
   "64N-90N": 0.58,
   "44N-64N": 0.89,
   "24N-44N": 0.49,
   "EQU-24N": 0.38,
   "24S-EQU": 0.36,
   "44S-24S": 0.37,
   "64S-44S": 0.37,
   "90S-64S": 0.37
 },
 {
   "Year": 2000,
   "Glob": 0.39,
   "NHem": 0.5,
   "SHem": 0.29,
   "24N-90N": 0.7,
   "24S-24N": 0.24,
   "90S-24S": 0.29,
   "64N-90N": 0.98,
   "44N-64N": 0.8,
   "24N-44N": 0.55,
   "EQU-24N": 0.2,
   "24S-EQU": 0.28,
   "44S-24S": 0.41,
   "64S-44S": 0.1,
   "90S-64S": 0.26
 },
 {
   "Year": 2010,
   "Glob": 0.72,
   "NHem": 0.91,
   "SHem": 0.54,
   "24N-90N": 1.03,
   "24S-24N": 0.68,
   "90S-24S": 0.47,
   "64N-90N": 2.23,
   "44N-64N": 0.87,
   "24N-44N": 0.74,
   "EQU-24N": 0.72,
   "24S-EQU": 0.65,
   "44S-24S": 0.63,
   "64S-44S": 0.2,
   "90S-64S": 0.49
 },
 {
   "Year": 2020,
   "Glob": 1.02,
   "NHem": 1.36,
   "SHem": 0.68,
   "24N-90N": 1.68,
   "24S-24N": 0.87,
   "90S-24S": 0.57,
   "64N-90N": 2.92,
   "44N-64N": 1.82,
   "24N-44N": 1.2,
   "EQU-24N": 0.89,
   "24S-EQU": 0.84,
   "44S-24S": 0.58,
   "64S-44S": 0.39,
   "90S-64S": 0.88
 }
]
var vis = d3.select("#visualisation"),
  WIDTH = 1500,
  HEIGHT = 800,
  legendX=WIDTH*0.85,
  legendY=HEIGHT*0.6,
  MARGINS = {
    top: 20,
    right: 20,
    bottom: 50,
    left: 80
  },
  xScale = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([1880,2030]),
  yScale = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([-2.9,2.9]),
  xAxis = d3.svg.axis().scale(xScale),
  yAxis = d3.svg.axis().scale(yScale).orient("left");


vis.append("svg:g")
    .attr("class","axis")
    .attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")")
    .call(xAxis);

vis.append("svg:text")
    .attr("text-anchor", "end")
    .attr("x", WIDTH/2)
    .attr("y", HEIGHT - 10)
    .style("font-size", "18px")
    .text("YEAR");

vis.append("svg:g")
    .attr("class","axis")
    .attr("transform", "translate(" + (MARGINS.left) + ",0)")
    .call(yAxis);

vis.append("svg:text")
    .attr("text-anchor", "end")
    .attr("transform", "rotate(-90)")
    .attr("y", 40)
    .attr("x", -WIDTH/3.5)
    .style("font-size", "18px")
    .text("DEVIATION")

vis.append("svg:text")
    .attr("x", WIDTH/4)
    .attr("y", 40)
    .style("font-size", "30px")
    .text("Zonal Annual Surface Temperature Means, 1880-2020.");

vis.append("svg:text")
    .attr("x", WIDTH/2.6)
    .attr("y", 80)
    .style("font-size", "14px")
    .text("Data taken from https://data.giss.nasa.gov/gistemp/");


var lineColorMap = {
   "Glob": "black",

   "NHem": "red",
   "SHem": "lime",

   "24N-90N": "green",

   "64N-90N": "cyan",
   "44N-64N": "purple",
   "24N-44N": "brown",
   "EQU-24N": "yellow",

   "24S-24N": "blue",

   "24S-EQU": "pink",
   "44S-24S": "grey",
   "64S-44S": "teal",
   "90S-64S": "orange",
   "90S-24S": "Magenta"
}


var circlesRadius=6;
for (const l in lineColorMap) {
  const yValue = lineColorMap[l];
  const x = d3.svg.line()
  .x(function(d) {
    return xScale(d.Year);
  })
  .y(function(d) {
    return yScale(d[l]);
  });
  const strokeWidth = ((l=="Glob" || l=="NHem" || l=="SHem") ? 4 : 1.5)
  vis.append('svg:path')
    .attr('d', x(data))
    .attr('stroke', yValue)
    .attr('stroke-width', strokeWidth)
    .attr('fill', 'none');

  // the legend
  vis.append("svg:circle")
    .attr("cx", legendX)
    .attr("cy", legendY)
    .attr("r", circlesRadius)
    .style("fill", yValue)
  vis.append("svg:text")
    .attr("x", legendX + 3*circlesRadius)
    .attr("y", legendY)
    .text(l)
    .style("font-size", "15px")
    .attr("alignment-baseline","middle")
  legendY = legendY + 15;
  if (l == "SHem" || l == "EQU-24N" || l == "24S-24N") legendY = legendY + 15;

}
</script>

</html>
